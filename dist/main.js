!function(t){var e={};function i(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);var r=class{constructor(t,e="empty"){this.coords=t,this.type=e,this.hidden=!0,this.flag=!1,this.tomatoCount=0}isTomato(){return"tomato"==this.type}reveal(t){this.tomatoCount=t,this.hidden=!1}displayVal(){return"empty"==this.type&&!this.hidden&&this.tomatoCount>0?this.tomatoCount:""}getHTML(){return`<div id=${this.coords.join()} class="cell ${this.hidden?"hidden":this.type} ${this.flag?"flag":""}">${this.displayVal()}</div>`}};var n=class{constructor(t=10,e=10){this.size=t,this.tomatoes=e,this.populate()}populate(){this.grid=new Array(this.size);for(let t=0;t<this.size;t++){this.grid[t]=new Array(this.size);for(let e=0;e<this.size;e++){let i=Math.random()>.95?"tomato":"empty";this.grid[t][e]=new r([t,e],i)}}}inbounds(t,e){return t>=0&&t<this.size&&e>=0&&e<this.size}getCell(t,e){return this.grid[t][e]}getNeighbors(t,e){if(!this.inbounds(t,e))return;let i=[];for(let r=-1;r<=1;r++)for(let n=-1;n<=1;n++)0==r&&0==n||this.inbounds(t+r,e+n)&&i.push(this.grid[t+r][e+n]);return i}getTomatoCount(t,e){let i=0;return this.getNeighbors(t,e).forEach(t=>{t.isTomato()&&i++}),i}reveal(t,e){let i=this.getCell(t,e);if(!i.hidden)return;let r=this.getTomatoCount(t,e);i.reveal(r),0==r&&this.getNeighbors(t,e).forEach(t=>{this.reveal(t.coords[0],t.coords[1])})}flagCell(t,e){this.getCell(t,e).flag=!0}unflagCell(t,e){this.getCell(t,e).flag=!1}getHTML(){let t="";return this.grid.forEach(e=>{t+="<div class='row'>",e.forEach(e=>{t+=e.getHTML()}),t+="</div>"}),t}};document.addEventListener("DOMContentLoaded",(function(t){const e=document.querySelector("#field"),i=new n(10);function r(){e.innerHTML=i.getHTML()}function o(t){let e=t.target;if(e.classList.contains("cell")&&("contextmenu"==t.type&&t.preventDefault(),e.classList.contains("hidden"))){let n=e.id.split(","),o=Number(n[0]),s=Number(n[1]);e.classList.contains("flag")?i.unflagCell(o,s):"click"==t.type?i.reveal(o,s):i.flagCell(o,s),r()}}window.board=i,window.renderBoard=r,r(),e.addEventListener("click",o),e.addEventListener("contextmenu",o)}))}]);